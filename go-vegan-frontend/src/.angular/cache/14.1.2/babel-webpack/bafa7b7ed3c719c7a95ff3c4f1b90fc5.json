{"ast":null,"code":"import { Observable } from 'rxjs';\nimport { Account } from '../../common/account';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/account.service\";\nimport * as i2 from \"../../services/login.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\n\nfunction AccountComponent_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 0)(1, \"td\", 1);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"td\");\n    i0.ɵɵelementStart(4, \"td\", 1);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\", 1);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 3);\n    i0.ɵɵtext(9, \"View Order Items\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const tempOrder_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", tempOrder_r1.id, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(tempOrder_r1.totalQuantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(tempOrder_r1.totalPrice);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/orderDetails/\", tempOrder_r1.id, \"\");\n  }\n}\n\nexport class AccountComponent {\n  //accId: number = 1;\n  constructor(accountService, loginService) {\n    this.accountService = accountService;\n    this.loginService = loginService;\n    this.account = new Account();\n  }\n\n  ngOnInit() {\n    //this.loginService.share.subscribe(u => this.account = u)\n    this.getLoginAccount().subscribe(() => {\n      this.getAccountByEmailAndPassword().subscribe(() => {\n        this.getOrderDataByAccountId();\n      });\n    });\n  }\n\n  getLoginAccount() {\n    return new Observable(observer => {\n      this.loginService.share.subscribe(u => this.account = u);\n      observer.next();\n    });\n  }\n\n  getAccountByEmailAndPassword() {\n    // for asynchronous execution of functions\n    return new Observable(observer => {\n      this.accountService.getAccount(this.account.email, this.account.password).subscribe(data => {\n        this.account = data;\n        console.log(this.account.id);\n        observer.next();\n      });\n    });\n  }\n  /*\r\n  getAccountDataById() {\r\n        // for asynchronous execution of functions\r\n    return new Observable(observer => {\r\n    \r\n      // for testing, id will always be 1\r\n      // will alter for dynamic id\r\n      const id: number = 1;\r\n          this.accountService.getAccountById(id).subscribe(\r\n        data => {\r\n          this.account = data;\r\n          observer.next();\r\n        }\r\n      )\r\n        });\r\n  }\r\n  */\n\n\n  getOrderDataByAccountId() {\n    this.accountService.getOrderByAccountId(this.account.id).subscribe(data => {\n      this.orders = data;\n    });\n  }\n\n}\n\nAccountComponent.ɵfac = function AccountComponent_Factory(t) {\n  return new (t || AccountComponent)(i0.ɵɵdirectiveInject(i1.AccountService), i0.ɵɵdirectiveInject(i2.LoginService));\n};\n\nAccountComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AccountComponent,\n  selectors: [[\"app-account\"]],\n  decls: 22,\n  vars: 4,\n  consts: [[\"width\", \"50%\"], [\"width\", \"12.5%\"], [\"width\", \"50%\", 4, \"ngFor\", \"ngForOf\"], [\"width\", \"12.5%\", 3, \"routerLink\"]],\n  template: function AccountComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h3\");\n      i0.ɵɵtext(1, \"Account\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"ul\")(3, \"li\");\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"li\");\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"li\");\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(9, \"p\");\n      i0.ɵɵelementStart(10, \"table\")(11, \"thead\")(12, \"tr\", 0)(13, \"th\", 1);\n      i0.ɵɵtext(14, \"Order Number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"th\", 1);\n      i0.ɵɵtext(16, \"Total Quantity\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"th\", 1);\n      i0.ɵɵtext(18, \"Total Price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(19, \"th\", 1);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(20, \"tbody\");\n      i0.ɵɵtemplate(21, AccountComponent_tr_21_Template, 10, 4, \"tr\", 2);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.account.firstName);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.account.lastName);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.account.email);\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngForOf\", ctx.orders);\n    }\n  },\n  dependencies: [i3.NgForOf, i4.RouterLink],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhY2NvdW50LmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,UAAT,QAA2B,MAA3B;AACA,SAASC,OAAT,QAAwB,sBAAxB;;;;;;;;;ICkBIC,8BAAiD,CAAjD,EAAiD,IAAjD,EAAiD,CAAjD;IAEoBA;IAAlBA;IACAA;IACAA;IAAkBA;IAA2BA;IAC7CA;IAAkBA;IAAwBA;IAC1CA;IAA8DA;IAAgBA;;;;;IAJ5DA;IAAAA;IAEAA;IAAAA;IACAA;IAAAA;IACdA;IAAAA;;;;ADdV,OAAM,MAAOC,gBAAP,CAAuB;EAM3B;EAEAC,YAAoBC,cAApB,EAA4DC,YAA5D,EAAsF;IAAlE;IAAwC;IAN5D,eAAU,IAAIL,OAAJ,EAAV;EAM2F;;EAI3FM,QAAQ;IACN;IACA,KAAKC,eAAL,GAAuBC,SAAvB,CAAiC,MAAK;MACpC,KAAKC,4BAAL,GAAoCD,SAApC,CAA8C,MAAK;QACjD,KAAKE,uBAAL;MACD,CAFD;IAGD,CAJD;EAMD;;EAGDH,eAAe;IAEb,OAAO,IAAIR,UAAJ,CAAeY,QAAQ,IAAG;MAC/B,KAAKN,YAAL,CAAkBO,KAAlB,CAAwBJ,SAAxB,CAAkCK,CAAC,IAAI,KAAKC,OAAL,GAAeD,CAAtD;MACAF,QAAQ,CAACI,IAAT;IACD,CAHM,CAAP;EAID;;EAKDN,4BAA4B;IAE1B;IACA,OAAO,IAAIV,UAAJ,CAAeY,QAAQ,IAAG;MAE/B,KAAKP,cAAL,CAAoBY,UAApB,CAA+B,KAAKF,OAAL,CAAaG,KAA5C,EAAmD,KAAKH,OAAL,CAAaI,QAAhE,EAA0EV,SAA1E,CACEW,IAAI,IAAG;QACL,KAAKL,OAAL,GAAeK,IAAf;QACAC,OAAO,CAACC,GAAR,CAAY,KAAKP,OAAL,CAAaQ,EAAzB;QACAX,QAAQ,CAACI,IAAT;MACD,CALH;IAQD,CAVM,CAAP;EAWD;EAGD;;;;;;;;;;;;;;;;;;;EAwBAL,uBAAuB;IAErB,KAAKN,cAAL,CAAoBmB,mBAApB,CAAwC,KAAKT,OAAL,CAAaQ,EAArD,EAAyDd,SAAzD,CACEW,IAAI,IAAG;MACL,KAAKK,MAAL,GAAcL,IAAd;IACD,CAHH;EAKD;;AAlF0B;;;mBAAhBjB,kBAAgBD;AAAA;;;QAAhBC;EAAgBuB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCZ7B5B;MAAIA;MAAOA;MAEXA,2BAAI,CAAJ,EAAI,IAAJ;MACMA;MAAqBA;MACzBA;MAAIA;MAAoBA;MACxBA;MAAIA;MAAiBA;MAIvBA;MACAA,+BAAO,EAAP,EAAO,OAAP,EAAO,EAAP,EAAO,IAAP,EAAO,CAAP,EAAO,EAAP,EAAO,IAAP,EAAO,CAAP;MAGwBA;MAAYA;MAC9BA;MAAkBA;MAAcA;MAChCA;MAAkBA;MAAWA;MAC7BA;MACFA;MAEFA;MACEA;MASFA;;;;MA1BIA;MAAAA;MACAA;MAAAA;MACAA;MAAAA;MAeoCA;MAAAA","names":["Observable","Account","i0","AccountComponent","constructor","accountService","loginService","ngOnInit","getLoginAccount","subscribe","getAccountByEmailAndPassword","getOrderDataByAccountId","observer","share","u","account","next","getAccount","email","password","data","console","log","id","getOrderByAccountId","orders","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\morped\\Documents\\go-vegan-project\\using-spring-rest-repo\\go-vegan\\go-vegan-frontend\\src\\app\\components\\account\\account.component.ts","C:\\Users\\morped\\Documents\\go-vegan-project\\using-spring-rest-repo\\go-vegan\\go-vegan-frontend\\src\\app\\components\\account\\account.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\r\nimport { Account } from '../../common/account';\r\nimport { Order } from '../../common/order';\r\nimport { AccountService } from '../../services/account.service';\r\nimport { LoginService } from '../../services/login.service';\r\n\n@Component({\n  selector: 'app-account',\n  templateUrl: './account.component.html',\n  styleUrls: ['./account.component.css']\n})\nexport class AccountComponent implements OnInit {\n\n  account = new Account();\n\n  orders: Order[];\n\n  //accId: number = 1;\n\n  constructor(private accountService: AccountService, private loginService: LoginService) { }\n\n\n\n  ngOnInit(): void {\n    //this.loginService.share.subscribe(u => this.account = u)\n    this.getLoginAccount().subscribe(() => {\n      this.getAccountByEmailAndPassword().subscribe(() => {\n        this.getOrderDataByAccountId();\r\n      });\r\n    });\n    \n  }\n\n  \n  getLoginAccount() {\n\r\n    return new Observable(observer => {\r\n      this.loginService.share.subscribe(u => this.account = u);\r\n      observer.next();\r\n    });\r\n  }\n  \n\n  \n\n  getAccountByEmailAndPassword() {\n\n    // for asynchronous execution of functions\n    return new Observable(observer => {\n\n      this.accountService.getAccount(this.account.email, this.account.password).subscribe(\r\n        data => {\r\n          this.account = data;\r\n          console.log(this.account.id);\r\n          observer.next();\r\n        }\r\n      )\r\n\r\n    });\r\n  }\n\n\n  /*\n  getAccountDataById() {\n\n    // for asynchronous execution of functions\n    return new Observable(observer => {\n\n\n      // for testing, id will always be 1\n      // will alter for dynamic id\n      const id: number = 1;\n\n      this.accountService.getAccountById(id).subscribe(\n        data => {\n          this.account = data;\n          observer.next();\n        }\n      )\n\n    });\n  }\n  */\n\n\n\n  getOrderDataByAccountId() {\n\n    this.accountService.getOrderByAccountId(this.account.id).subscribe(\n      data => {\n        this.orders = data;\n      }\n    )\n  }\n\n}\n","<h3>Account</h3>\r\n\r\n<ul>\r\n  <li>{{account.firstName}}</li>\r\n  <li>{{account.lastName}}</li>\r\n  <li>{{account.email}}</li>\r\n</ul>\r\n\r\n\r\n<p></p>\r\n<table>\r\n  <thead>\r\n    <tr width=\"50%\">\r\n      <th width=\"12.5%\">Order Number</th>\r\n      <th width=\"12.5%\">Total Quantity</th>\r\n      <th width=\"12.5%\">Total Price</th>\r\n      <th width=\"12.5%\"></th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr width=\"50%\" *ngFor=\"let tempOrder of orders\">\r\n\r\n      <td width=\"12.5%\">{{tempOrder.id}}\r\n      <td>\r\n      <td width=\"12.5%\">{{tempOrder.totalQuantity}}</td>\r\n      <td width=\"12.5%\">{{tempOrder.totalPrice}}</td>\r\n      <td routerLink=\"/orderDetails/{{tempOrder.id}}\" width=\"12.5%\">View Order Items</td>\r\n\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n"]},"metadata":{},"sourceType":"module"}